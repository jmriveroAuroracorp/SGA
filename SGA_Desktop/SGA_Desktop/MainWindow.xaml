<Window x:Class="SGA_Desktop.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="clr-namespace:SGA_Desktop.ViewModels"
        Title="AURORA SGA"
        WindowStartupLocation="CenterScreen"
        WindowState="Maximized"
        WindowStyle="None"
        ResizeMode="CanResize"
        Background="{StaticResource BrushFondo}">



    <Grid>
        <!-- Barra de título personalizada -->
        <Border x:Name="CustomTitleBar"
                Background="{StaticResource BrushPrincipal}"
                Height="32"
                VerticalAlignment="Top"
                MouseLeftButtonDown="CustomTitleBar_MouseLeftButtonDown">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <!-- Logo y título -->
                <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center" Margin="6,0,0,0">
                    <Image Source="Assets/iconoSGA.jpg" Height="20" Margin="0,0,6,0" VerticalAlignment="Center"/>
                    <TextBlock Text="AURORA SGA"
                               Foreground="White"
                               FontFamily="{StaticResource FuentePrincipal}"
                               FontSize="15"
                               FontWeight="Bold"
                               VerticalAlignment="Center"/>
                </StackPanel>
                <!-- Botones de ventana -->
                <StackPanel Grid.Column="2" Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Right" Margin="0,0,2,0">
                    <Button x:Name="MinimizeButton" Click="MinimizeButton_Click" Width="32" Height="32" Style="{StaticResource EstiloBotonPrincipal}" ToolTip="Minimizar">
                        <TextBlock Text="_" FontSize="14" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                    </Button>
                    <Button x:Name="CloseButton" Click="CloseButton_Click" Width="32" Height="32" Style="{StaticResource EstiloBotonPrincipal}" ToolTip="Cerrar">
                        <TextBlock Text="✕" FontSize="13" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                    </Button>
                </StackPanel>
            </Grid>
        </Border>
        <!-- El resto del contenido de la ventana va debajo de la barra personalizada -->
        <Grid Margin="0,36,0,0">
            <!-- Dos filas: 0=Header, 1=Cuerpo -->
            <Grid.RowDefinitions>
                <RowDefinition Height="70"/>
                <!-- Header fijo -->
                <RowDefinition Height="*"/>
                <!-- Menú + contenido -->
            </Grid.RowDefinitions>
            <!-- Dos columnas: 0=Menú, 1=Contenido -->
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="200"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- === 1) HEADER GLOBAL (fila 0, span 2 columnas) === -->
            <Border Grid.Row="0"
                Grid.ColumnSpan="2"
                Background="{StaticResource BrushPrincipal}"
                MinHeight="70">
                <Grid Margin="20,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    <!-- 1) Nombre de la vista, alineado a la izquierda -->
                    <TextBlock Grid.Column="0"
                       Text="{Binding CurrentHeader}"
                       Foreground="White"
                       FontFamily="{StaticResource FuentePrincipal}"
                       FontSize="30"
                       FontWeight="Bold"
                       VerticalAlignment="Center"
                       HorizontalAlignment="Left"/>
                    <!-- 2) Empresa, colocada en la columna central y centrada -->
                    <TextBlock Grid.Column="1"
                       Text="{Binding EmpresaNombre, StringFormat='EMPRESA: {0}'}"
                       Foreground="White"
                       FontFamily="{StaticResource FuentePrincipal}"
                       FontSize="24"
                       FontWeight="Bold"
                       VerticalAlignment="Center"
                       HorizontalAlignment="Center"
                       Margin="0,0,30,0"            />
                    <!-- 3) Operario, alineado a la derecha -->
                    <TextBlock Grid.Column="2"
                       Text="{Binding NombreOperario, StringFormat='OPERARIO: {0}'}"
                       Foreground="White"
                       FontFamily="{StaticResource FuentePrincipal}"
                       FontSize="24"
                       FontWeight="Bold"
                       VerticalAlignment="Center"
                       HorizontalAlignment="Right"/>
                </Grid>
            </Border>

            <!-- === 2) MENÚ LATERAL (fila 1, col 0) === -->
            <Grid Grid.Row="1" Grid.Column="0"
              Background="{StaticResource BrushFondo}">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <!-- logo -->
                    <RowDefinition Height="*"/>
                    <!-- botones -->
                </Grid.RowDefinitions>

                <!-- Logo -->
                <Border Grid.Row="0"
            Background="White"
            Padding="16"
            Margin="10"
            CornerRadius="8"
            BorderBrush="{StaticResource BrushPrincipal}"  
                    BorderThickness="2">
                    <!-- grosor del borde -->
                    <Image Source="Assets/iconoSGA.jpg"
               Height="60"
               HorizontalAlignment="Center"/>
                </Border>

                <!-- Botones -->
                <StackPanel Grid.Row="1"
                      Margin="0,20,0,0"
                      VerticalAlignment="Top" Cursor="">
                    <Button Content="Consulta de Stock"
                    Command="{Binding IrAConsultaStockCommand}"
                    Style="{StaticResource EstiloBotonPrincipal}"
                    Margin="10,5"/>
                    <!-- Visibility="{Binding Converter={StaticResource PermisosToVisibilityConverter}, ConverterParameter=ConsultaStock}" -->
                    <Button Content="Ubicaciones"
                    Command="{Binding IrAUbicacionesCommand}"
                    Style="{StaticResource EstiloBotonPrincipal}"
                    Margin="10,5"/>
                    <!-- Visibility="{Binding Converter={StaticResource PermisosToVisibilityConverter}, ConverterParameter=Ubicaciones}" -->
                    <!-- Nuevo botón para traspasos de stock -->
                    <Button Content="Traspasos de Stock"
                    Command="{Binding IrATraspasosStockCommand}"
                    Style="{StaticResource EstiloBotonPrincipal}"
                    Margin="10,5"/>
                    <!-- Visibility="{Binding Converter={StaticResource PermisosToVisibilityConverter}, ConverterParameter=TraspasosStock}" -->
                    <!-- Renombrar el botón de traspasos actual -->
                    <Button Content="Traspasos de Palet"
                    Command="{Binding IrATraspasosCommand}"
                    Style="{StaticResource EstiloBotonPrincipal}"
                    Margin="10,5"/>
                    <!-- Visibility="{Binding Converter={StaticResource PermisosToVisibilityConverter}, ConverterParameter=TraspasosPalet}" -->
                    <!--<Button Content="Inventario" …/>-->
                    <Button Content="Etiquetas"
                    Command="{Binding IrAEtiquetasCommand}"
                    Style="{StaticResource EstiloBotonPrincipal}"
                    Margin="10,5"
                    Visibility="Collapsed"/>
                    <Button Content="Inventario"
                    Command="{Binding IrAInventarioCommand}"
                    Style="{StaticResource EstiloBotonPrincipal}"
                    Margin="10,5"/>
                    <!-- Visibility="{Binding Converter={StaticResource PermisosToVisibilityConverter}, ConverterParameter=Inventario}" -->
                    <Button Content="Órdenes de Traspaso"
                    Command="{Binding IrAOrdenTrabajoCommand}"
                    Style="{StaticResource EstiloBotonPrincipal}"
                    Margin="10,5"/>
                    <!-- Visibility="{Binding Converter={StaticResource PermisosToVisibilityConverter}, ConverterParameter=OrdenTrabajo}" -->
                    <Button Content="Controles Rotativos"
                    Command="{Binding IrAControlesRotativosCommand}"
                    Style="{StaticResource EstiloBotonPrincipal}"
                    Margin="10,5"/>
                    <!-- Visibility="{Binding Converter={StaticResource PermisosToVisibilityConverter}, ConverterParameter=ControlesRotativos}" -->
                    <Button Content="Empresa"
                    Command="{Binding IrASeleccionEmpresaCommand}"
                    Style="{StaticResource EstiloBotonPrincipal}"
                    Margin="10,5"/>
                    <!-- Visibility="{Binding Converter={StaticResource PermisosToVisibilityConverter}, ConverterParameter=Empresa}" -->
                    <Button Content="Salir"
                    Command="{Binding CerrarSesionCommand}"
                    Style="{StaticResource EstiloBotonPrincipal}"
                    Margin="10,5"/>
                </StackPanel>
            </Grid>

            <!-- === 3) ÁREA DE CONTENIDO (fila 1, col 1) === -->
            <Border Grid.Row="1" Grid.Column="1"
            Margin="20"
            Padding="12"
            CornerRadius="8"
            Background="{StaticResource BrushFondo}"
            BorderBrush="{StaticResource BrushPrincipal}"
            BorderThickness="2">
                <Border.Effect>
                    <DropShadowEffect BlurRadius="8"
                              ShadowDepth="4"
                              Opacity="0.3"/>
                </Border.Effect>

                <Frame x:Name="MainFrame"
               NavigationUIVisibility="Hidden"
               Margin="0"                                
                HorizontalAlignment="Stretch"
 
                VerticalAlignment="Stretch"
      
                HorizontalContentAlignment="Stretch"
     
                VerticalContentAlignment="Stretch"/>

            </Border>

        </Grid>
    </Grid>
</Window>
